<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Farmers.gov Design System Test</title>
    <link rel="stylesheet" href="dist/css/main.min.css">
    <style media="screen">
      .container {
        width: 114rem;
        display: flex;
        justify-content: space-between;
        outline: 1px solid blue;
      }
      .demo-block {
        width: 100%;
      }
      .accordion-test {
        display: flex;
        flex-direction: column;
        width: 34.6rem;
        height: 20rem;
        outline: 2px solid red;
        margin: 2rem 0;
        /* min-height: 30rem; */
      }
      .Accordion {
        display: flex;
        justify-content: space-around;
        flex-wrap: wrap;
        width: auto;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="demo-block">
  <!-- Accordion Configuration Options

  data-allow-toggle
    Allow for each toggle to both open and close its section. Makes it possible for all sections to be closed. Assumes only one section may be open.

  data-allow-multiple
    Allow for multiple accordion sections to be expanded at the same time. Assumes data-allow-toggle otherwise the toggle on open sections would be disabled.
  __________

  Ex:
    <div id="accordionGroup" class="Accordion" data-allow-multiple>

    <div id="accordionGroup" class="Accordion" data-allow-toggle>
  -->
  <div id="accordionGroup" class="Accordion">
    <div class="accordion-test">
      <h3 tabindex="0"
          aria-expanded="true"
          class="Accordion-trigger"
          aria-controls="sect1"
          id="accordion1id">
        <span class="Accordion-title">
          Personal Information
          <span class="Accordion-icon"></span>
        </span>
      </h3>
      <div id="sect1"
        role="region"
        aria-labelledby="accordion1id"
        class="Accordion-panel">
        <div>
          <!-- Variable content within section, may include any type of markup or interactive widgets. -->
          <fieldset>
            <p>
              <label for="cufc1">
                Name
                <span aria-hidden="true">
                  *
                </span>
                :
              </label>
              <input type="text"
              value=""
              name="Name"
              id="cufc1"
              class="required"
              aria-required="true">
            </p>
            <p>
              <label for="cufc2">
                Email
                <span aria-hidden="true">
                  *
                </span>
                :
              </label>
              <input type="text"
              value=""
              name="Email"
              id="cufc2"
              aria-required="true">
            </p>
            <p>
              <label for="cufc3">
                Phone:
              </label>
              <input type="text"
              value=""
              name="Phone"
              id="cufc3">
            </p>
            <p>
              <label for="cufc4">
                Extension:
              </label>
              <input type="text"
              value=""
              name="Ext"
              id="cufc4">
            </p>
            <p>
              <label for="cufc5">
                Country:
              </label>
              <input type="text"
              value=""
              name="Country"
              id="cufc5">
            </p>
            <p>
              <label for="cufc6">
                City/Province:
              </label>
              <input type="text"
              value=""
              name="City_Province"
              id="cufc6">
            </p>
          </fieldset>
        </div>
      </div>
    </div>
    <div class="accordion-test">
      <h3 tabindex="0"
          aria-expanded="false"
        class="Accordion-trigger"
        aria-controls="sect2"
        id="accordion2id">
        <span class="Accordion-title">
          Billing Address
          <span class="Accordion-icon"></span>
        </span>
      </h3>
      <div id="sect2"
            role="region"
            aria-labelledby="accordion2id"
            class="Accordion-panel"
            hidden="">
        <div>
          <fieldset>
            <p>
              <label for="b-add1">
                Address 1:
              </label>
              <input type="text"
              name="b-add1"
              id="b-add1">
            </p>
            <p>
              <label for="b-add2">
                Address 2:
              </label>
              <input type="text"
              name="b-add2"
              id="b-add2">
            </p>
            <p>
              <label for="b-city">
                City:
              </label>
              <input type="text"
              name="b-city"
              id="b-city">
            </p>
            <p>
              <label for="b-state">
                State:
              </label>
              <input type="text"
              name="b-state"
              id="b-state">
            </p>
            <p>
              <label for="b-zip">
                Zip Code:
              </label>
              <input type="text"
              name="b-zip"
              id="b-zip">
            </p>
          </fieldset>
        </div>
      </div>
    </div>
    <div class="accordion-test">
      <h3 tabindex="0"
          aria-expanded="false"
          class="Accordion-trigger"
          aria-controls="sect3"
          id="accordion3id">
          <span class="Accordion-title">
            Shipping Address
            <span class="Accordion-icon"></span>
          </span>
      </h3>
      <div id="sect3"
          role="region"
          aria-labelledby="accordion3id"
          class="Accordion-panel"
          hidden="">
          <div>
            <fieldset>
              <p>
                <label for="m-add1">
                  Address 1:
                </label>
                <input type="text"
                name="m-add1"
                id="m-add1">
              </p>
              <p>
                <label for="m-add2">
                  Address 2:
                </label>
                <input type="text"
                name="m-add2"
                id="m-add2">
              </p>
              <p>
                <label for="m-city">
                  City:
                </label>
                <input type="text"
                name="m-city"
                id="m-city">
              </p>
              <p>
                <label for="m-state">
                  State:
                </label>
                <input type="text"
                name="m-state"
                id="m-state">
              </p>
              <p>
                <label for="m-zip">
                  Zip Code:
                </label>
                <input type="text"
                name="m-zip"
                id="m-zip">
              </p>
            </fieldset>
          </div>
      </div>
    </div>
  </div>
</div>
    </div>

    <script type="text/javascript">
    /*
    *   This content is licensed according to the W3C Software License at
    *   https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document
    *
    *   Simple accordion pattern example
    */

    'use strict';

    Array.prototype.slice.call(document.querySelectorAll('.Accordion')).forEach(function (accordion) {

    // Allow for multiple accordion sections to be expanded at the same time
    var allowMultiple = false; //accordion.hasAttribute('data-allow-multiple');
    // Allow for each toggle to both open and close individually
    var allowToggle = (allowMultiple) ? allowMultiple : accordion.hasAttribute('data-allow-toggle');

    // Create the array of toggle elements for the accordion group
    var triggers = Array.prototype.slice.call(accordion.querySelectorAll('.Accordion-trigger'));
    var panels = Array.prototype.slice.call(accordion.querySelectorAll('.Accordion-panel'));


    accordion.addEventListener('click', function (event) {
      var target = event.target;
      target.parentElement.classList.contains('Accordion-trigger') ? target = target.parentElement : '' ; // Kind of a hack

      if (target.classList.contains('Accordion-trigger') ) {
        // Check if the current toggle is expanded.
        var isExpanded = target.getAttribute('aria-expanded') == 'true';
        var active = accordion.querySelector('[aria-expanded="true"]');

        // without allowMultiple, close the open accordion
        if (!allowMultiple && active && active !== target) {
          // Set the expanded state on the triggering element
          active.setAttribute('aria-expanded', 'false');
          // Hide the accordion sections, using aria-controls to specify the desired section
          document.getElementById(active.getAttribute('aria-controls')).setAttribute('hidden', '');

          // When toggling is not allowed, clean up disabled state
          if (!allowToggle) {
            active.removeAttribute('aria-disabled');
          }
        }

        if (!isExpanded) {
          // Set the expanded state on the triggering element
          target.setAttribute('aria-expanded', 'true');
          // Hide the accordion sections, using aria-controls to specify the desired section
          document.getElementById(target.getAttribute('aria-controls')).removeAttribute('hidden');

          // If toggling is not allowed, set disabled state on trigger
          if (!allowToggle) {
            target.setAttribute('aria-disabled', 'true');
          }
        }
        else if (allowToggle && isExpanded) {
          // Set the expanded state on the triggering element
          target.setAttribute('aria-expanded', 'false');
          // Hide the accordion sections, using aria-controls to specify the desired section
          document.getElementById(target.getAttribute('aria-controls')).setAttribute('hidden', '');
        }

        event.preventDefault();
      }
    });

    // Bind keyboard behaviors on the main accordion container
    accordion.addEventListener('keydown', function (event) {
      var target = event.target;
      var key = event.which.toString();

      var isExpanded = target.getAttribute('aria-expanded') == 'true';
      var allowToggle = (allowMultiple) ? allowMultiple : accordion.hasAttribute('data-allow-toggle');

      // 33 = Page Up, 34 = Page Down
      var ctrlModifier = (event.ctrlKey && key.match(/33|34/));

      // Is this coming from an accordion header?
      if (target.classList.contains('Accordion-trigger')) {
        // Up/ Down arrow and Control + Page Up/ Page Down keyboard operations
        // 38 = Up, 40 = Down
        if (key.match(/38|40/) || ctrlModifier) {
          var index = triggers.indexOf(target);
          var direction = (key.match(/34|40/)) ? 1 : -1;
          var length = triggers.length;
          var newIndex = (index + length + direction) % length;

          triggers[newIndex].focus();

          event.preventDefault();
        }
        else if (key.match(/35|36/)) {
          // 35 = End, 36 = Home keyboard operations
          switch (key) {
            // Go to first accordion
            case '36':
              triggers[0].focus();
              break;
              // Go to last accordion
            case '35':
              triggers[triggers.length - 1].focus();
              break;
          }
          event.preventDefault();

        } else if (key.match(/32|13/)) {
          // 13 = Enter, 32 = Space keyboard operations
          target.click();
        }

      }
    });

    // These are used to style the accordion when one of the buttons has focus
    accordion.querySelectorAll('.Accordion-trigger').forEach(function (trigger) {

      trigger.addEventListener('focus', function (event) {
        accordion.classList.add('focus');
      });

      trigger.addEventListener('blur', function (event) {
        accordion.classList.remove('focus');
      });

    });

    // Minor setup: will set disabled state, via aria-disabled, to an
    // expanded/ active accordion which is not allowed to be toggled close
    if (!allowToggle) {
      // Get the first expanded/ active accordion
      var expanded = accordion.querySelector('[aria-expanded="true"]');

      // If an expanded/ active accordion is found, disable
      if (expanded) {
        expanded.setAttribute('aria-disabled', 'true');
      }
    }

    });
    </script>
  </body>
</html>
