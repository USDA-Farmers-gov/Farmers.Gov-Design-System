<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Farmers.gov Design System Test</title>
    <link rel="stylesheet" href="dist/css/main.min.css">
    <script src="dist/js/smoothscroll-polyfill.min.js" charset="utf-8"></script>
    <script src="dist/js/farmers.min.js" charset="utf-8"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js"></script>

    <style media="screen">
      .row {
        margin-top: .5rem;
        margin-bottom: .5rem;
      }

      .stepper-example-2 {
        outline: 1px solid aqua;
      }

      .vertical-step {
        min-height: 10rem;
        display: flex;
        padding-bottom: .8rem;
      }

      .vertical-step-content {
        width: 100%;
        display: flex;
        flex-direction: column;
      }

      .vertical-step-left {
        /* outline: 1px solid red; */
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        align-items: center;
      }

      .vertical-step-selections {
        display: flex;
        flex-wrap: wrap;
      }

      .vertical-step-selections > div {
        margin-bottom: 1.4rem;
      }

      .vertical-step-header {
        padding-left: 1rem;
      }

      .vertical-step-header > h2 {
        margin-top: 0;
      }

      .vertical-step-left > .step-icon {
        height: 4rem;
        width: 4rem;
        border-radius: 50%;
        background: green;
        display: flex;
        justify-content: center;
        align-items: center;
        color: white;
        font-size: 2rem;
        line-height: 2.6rem;
      }

      .vertical-step-left:after {
        content: ' ';
        background: grey;
        width: 0.2rem;
        height: 90%;
      }
    </style>
  </head>
  <body>


    <div class="container">
      <div class="row">
        <div class="medium-2">
          <input type="radio" class="radio-input" name="group1" id="r1" value="1" tabindex="-1">
          <label for="r1" class="radio-label">Choice 1</label>
        </div>
        <div class="medium-2">
          <input type="radio" class="radio-input" name="group1" id="r2" value="1" tabindex="-1">
          <label for="r2" class="radio-label">Choice 2</label>
        </div>
      </div>

      <div class="row">
        <div class="medium-12">
          <p> </p>
          <hr>
          <p> </p>
        </div>
      </div>

      <div class="row">
        <div class="medium-3">
          <label tabindex="0" for="radio-card-1" class="radio-card-label">
            <div class="radio-card-bottom">
              <input type="radio" id="radio-card-1" class="radio-card-input" name="radio-example" title="Card Radio" tabindex="-1">
              Card Radio
              <span class="radio-icon"></span>
            </div>
          </label>
        </div>
        <div class="medium-3">
          <label tabindex="0" for="radio-card-2" class="radio-card-label with-image">
            <div class="radio-img-card-top">
              <img src="./img/leaves.svg">
            </div>
            <div class="radio-img-card-bottom">
              <input type="radio" id="radio-card-2" class="radio-card-input" name="radio-example" title="Card Radio" tabindex="-1">
              Card Radio w/ Image
              <span class="radio-icon"></span>
            </div>
          </label>
        </div>
        <div class="medium-3">
          <label tabindex="0" for="radio-card-3" class="radio-card-label disabled">
            <div class="radio-card-bottom">
              <input type="radio" id="radio-card-3" class="radio-card-input" name="radio-example" title="Card Radio" tabindex="-1">
              Card Radio
              <span class="radio-icon"></span>
            </div>
          </label>
        </div>
      </div>

      <div class="row">
        <div class="medium-12">
          <p> </p>
          <hr>
          <p> </p>
        </div>
      </div>

      <div class="row">
        <div class="medium-2">
          <div class="checkbox-wrap focus">
            <input type="checkbox" id="cb-1" name="example-1" tabindex="-1" class="checkbox-input">
            <label tabindex="0" for="cb-1" class="checkbox-label">Option 1</label>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="medium-12">
          <p> </p>
          <hr>
          <p> </p>
        </div>
      </div>

      <div class="row">

        <div class="medium-3">
          <label tabindex="0" for="checkbox-card-1" class="checkbox-card-label">
            <div class="cb-card-bottom">
              <input type="checkbox" id="checkbox-card-1" class="checkbox-card-input" title="Card Checkbox" tabindex="-1">
              Card Checkbox
              <span class="cb-icon"></span>
            </div>
          </label>
        </div>

        <div class="medium-3">
          <label tabindex="0" for="checkbox-card-2" class="checkbox-card-label with-image">
            <div class="cb-img-card-top">
              <img src="./img/leaves.svg">
            </div>
            <div class="cb-img-card-bottom">
              <input type="checkbox" id="checkbox-card-2" class="checkbox-card-input" title="Card Checkbox" tabindex="-1">
              Card Checkbox w/ Image
              <span class="cb-icon"></span>
            </div>
          </label>
        </div>

        <div class="medium-3">
          <label tabindex="0" for="checkbox-card-3" class="checkbox-card-label disabled">
            <div class="cb-card-bottom">
              <input type="checkbox" id="checkbox-card-3" class="checkbox-card-input" title="Card Checkbox" disabled tabindex="-1">
              Card Checkbox (disabled)
              <span class="cb-icon"></span>
            </div>
          </label>
        </div>


      </div>

      <div class="row">
        <div class="medium-12">
          <p> </p>
          <hr>
          <p> </p>
        </div>
      </div>

      <div class="row">
        <div class="medium-12">
          <p>
            This Reflective IR Sensor is a simple plastic casing with two elements - an IR LED and an IR phototransistor. You can control the IR LED and turn it on to bounce IR off objects to determine their reflectivity. White & light colored stuff will bounce the light, so  you can detect it. Black & dark colored stuff will absorb the IR light so that it isn't detected. Likewise, if something isn't in the way of the sensor, it won't trigger either.
            These sensors are handy when you want to detect if something has passed by the sensor, or a very simple hand-detector. Also sometimes these are used as rotary encoder, if the encoder wheel has black and white stripes, the photo sensor is fast enough to tell you the RPM. Most common usage of these sensors is for line following robots, they're so small and easy to solder, you can pack them together very close.
            This sensor is compact, breadboard friendly and easy to solder to. It even has handy markings on the plastic so you know which side is the LED and which side is the phototransistor output. We don't include any 470Ω -1KΩ resistors for the Infrared LED, or a 10KΩ for the output pullup. But you do get a pack of 5!
            This works best when detecting a light-colored object approximately 5mm away - 2mm to 10mm worked fairly well but your results may vary with the LED brightness, object shininess, etc.
          </p>
          <hr>
          <p> </p>
        </div>
      </div>

      <div id="accordionGroup" class="Accordion row" data-allow-toggle>
        <div class="box-accordion medium-4">
          <div  class="box-accordion-top Accordion-trigger"
                tabindex="0"
                aria-expanded="false"
                aria-controls="sect1"
                id="accordion1id">
            <h3>
                <span class="Accordion-title headline-3">
                  Personal Information
                </span>
            </h3>
            <div class="down-arrow"></div>
          </div>
          <div  id="sect1"
                role="region"
                aria-labelledby="accordion1id"
                class="Accordion-panel"
                hidden="">
              <p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
              </p>
          </div>
        </div>
        <div class="box-accordion medium-4">
          <div  class="box-accordion-top Accordion-trigger"
                tabindex="0"
                aria-expanded="false"
                aria-controls="sect2"
                id="accordion2id">
            <h3>
              <span class="Accordion-title headline-3">
                Billing Address
              </span>
            </h3>
            <div class="down-arrow"></div>
          </div>
          <div id="sect2"
                role="region"
                aria-labelledby="accordion2id"
                class="Accordion-panel"
                hidden="">
                <p>
                  LorBilling Addresseiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                </p>
          </div>
        </div>
        <div class="box-accordion medium-4">
          <div class="box-accordion-top Accordion-trigger"
                tabindex="0"
                aria-expanded="false"
                aria-controls="sect3"
                id="accordion3id">
            <h3>
              <span class="Accordion-title headline-3">
                Shipping Address
              </span>
            </h3>
            <div class="down-arrow"></div>
          </div>
          <div id="sect3"
              role="region"
              aria-labelledby="accordion3id"
              class="Accordion-panel"
              hidden="">
              <p>
                LoreShipping Addresstur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
              </p>
          </div>
        </div>
      </div>

      <div id="accordionFull" class="Card-Accordion">
        <div class="card-accordion" tabindex="0">
          <div class="card-accordion-content">
            <p>
              General Kenobi, years ago you served my father in the Clone Wars. Now he begs you to help him in his struggle against the Empire. I regret that I am unable to present my father's request to you in person, but my ship has fallen under attack and I'm afraid my mission to bring you to Alderaan has failed. I have placed information vital to the survival of the Rebellion into the memory systems of this R2 unit. My father will know how to retrieve it. You must see this droid safely delivered to him on Alderaan. This is our most desperate hour. Help me, Obi-Wan Kenobi, you're my only hope.

              Stretch out with your feelings. You see, you can do it. I call it luck. In my experience, there's no such thing as luck. Look, going good against remotes is one thing. Going good against the living? That's something else. Looks like we're coming up on Alderaan. You know, I did feel something. I could almost see the remote. That's good. You have taken your first step into a larger world.

              Lord Vader, I should have known. Only you could be so bold. The Imperial Senate will not sit for this, when they hear you've attacked a diplomatic... Don't play games with me, Your Highness. You weren't on any mercy mission this time. You passed directly through a restricted system. Several transmissions were beamed to this ship by Rebel spies. I want to know what happened to the plans they sent you. I don't know what you're talking about. I'm a member of the Imperial Senate on a diplomatic mission to Alderaan... You're a part of the Rebel Alliance...and a traitor. Take her away!

              Wake up! Wake up! We're doomed. Do you think they'll melt us down? Don't shoot! Don't shoot! Will this never end? Luke, tell Owen that if he gets a translator to be sure it speaks Bocce. It looks like we don't have much of a choice but I'll remind him. I have no need for a protocol droid. Sir -- not in an environment such as this -- that's why I've also been programmed for over thirty secondary functions that... What I really need is a droid that understands the binary language of moisture vaporators. Vaporators! Sir -- My first job was programming binary load lifter...very similar to your vaporators. You could say... Do you speak Bocce? Of course I can, sir. It's like a second language for me...I'm as fluent in... All right shut up! I'll take this one.

              You must learn the ways of the Force if you're to come with me to Alderaan. Alderaan? I'm not going to Alderaan. I've got to go home. It's late, I'm in for it as it is. I need your help, Luke. She needs your help. I'm getting too old for this sort of thing. I can't get involved! I've got work to do! It's not that I like the Empire. I hate it! But there's nothing I can do about it right now. It's such a long way from here. That's your uncle talking. Oh, God, my uncle. How am I ever going to explain this?
            </p>
          </div>
          <div class="card-accordion-toggle">
            <a href="javascript:undefined;" class="card-accordion-show-more" tabindex="-1">Show More</a>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="medium-12">
          <p> </p>
          <hr>
          <p> </p>
        </div>
      </div>

      <div class="row">
        <div class="medium-3">
          <select class="form-select" name="example-select">
            <option value="Bingo">Bingo</option>
            <option value="Bango">Bango</option>
          </select>
        </div>
      </div>


      <div class="row">
        <div class="medium-12">
          <p> </p>
          <hr>
          <p> </p>
        </div>
      </div>

      <div class="row">

        <div class="medium-4">
          <div class="content-card accent-top">
            <div class="img">
              <img src="./old/images/icon_service_center.svg" alt="">
            </div>
            <div class="headline">
              <h4>Example Card Headline</h4>
            </div>
            <div class="content">
              <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis.</p>
            </div>
          </div>
        </div>

        <div class="medium-4">
          <div class="content-card">
            <div class="img">
              <img src="./old/images/icon_service_center.svg" alt="">
            </div>
            <div class="headline">
              <h4>Example Card Headline</h4>
            </div>
            <div class="content">
              <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis.</p>
            </div>
            <div class="link">
              <a href="#" class="text-link">Text Link</a>
            </div>
          </div>
        </div>

        <div class="medium-3">
          <div class="resource-card">
            <div class="logo">
              <img src="./img/usda-symbol.svg" alt="">
            </div>
            <div class="link">
              <a href="#" class="external-link">External Link Headline</a>
            </div>
            <div class="content">
              <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis.</p>
            </div>
          </div>
        </div>

      </div>

      <div class="row">
        <div class="medium-12">
          <p></p>
          <hr>
          <p></p>
        </div>
      </div>

      <div class="row">
        <div class="stepper-example medium-12">

        </div>

      </div>
    </div>

    <script type="text/javascript">
    // background: black;
      console.clear();
      const stylestring = `
      font-size: 4rem;
      font-family: "Lord of the Sith 3D Italic";
      text-shadow: 1px 1px 4px #007eff;
      background: url(https://thumbs.gfycat.com/TenderGloriousBluebreastedkookaburra-size_restricted.gif) 143% 0%;
      background-size: 555rem;
      padding: 2rem;`;
      console.log('%cLrd Grdnr!', stylestring);


      class Stepper {

        constructor(rootElement, name, stepsArray) {
          this.sRoot = document.querySelector(rootElement);
          this.steps = stepsArray.map( step => {
            return new Step(step);
          });
          this.$form = document.createElement('form');
          this.$form.setAttribute('id', name);
          this.$form.addEventListener('submit', (e) => { e.preventDefault() })

          this.render = () => {
            let temp = document.createElement('div');

            this.steps.map( step => {
              return step.markup();
            })
            .map( markup => {
              if (!!markup) {
                console.log(markup);
                this.$form.appendChild(markup);
              }
            })

            this.sRoot.innerHTML = '';
            this.sRoot.appendChild(this.$form);
            return this.sRoot;
          }

        }

      }

      class Step {

        constructor(step){
          this.data = { ...step }
          this.results = [];
          this.stepTypes = {
            'checkbox': {
              make: (stepObj) => {
                const checkboxMarkup = (selection, width = 'medium-3') => {
                  return `
                    <div class="${width}">
                      <label class="checkbox-card-label with-image" for="${selection.name}" tabindex="0">
                        <div class="cb-img-card-top">
                          <h2>${selection.text}</h2>
                        </div>
                        <div class="cb-img-card-bottom">
                          <input class="checkbox-card-input" id="${selection.name}" type="checkbox">
                          <span class="cb-icon"></span>
                        </div>
                      </label>
                    </div>
                  `;
                }

                return stepObj.selections.map( item => checkboxMarkup(item, stepObj.selection_width_class) ).join(',').split(',').join('');
              },
              checkboxNext: (stepObj) => {
                let div = document.createElement('div');
                let btn = document.createElement('button');
                let tmp = document.createElement('span');
                div.classList.add('next-btn');
                btn.classList.add('btn');
                btn.innerText = 'Next';
                btn.addEventListener('click', stepObj.stepLeave);
                div.appendChild(btn);
                tmp.appendChild(div);

                return div;
              }
            },
            'radio': {
              make: (stepObj) => {
                const radioMarkup = (selection, width = 'medium-3') => {
                  return `
                    <div class="${width}">
                      <label tabindex="0" for="${selection.id}" class="radio-card-label">
                        <div class="radio-card-bottom">
                          <input type="radio" id="${selection.id}" class="radio-card-input" name="${selection.name}" title="Card Radio" tabindex="-1">
                          ${selection.text}
                          <span class="radio-icon"></span>
                        </div>
                      </label>
                    </div>
                  `;
                }

                return stepObj.selections.map( item => radioMarkup(item, stepObj.selection_width_class) ).join(',').split(',').join('');
              }
            }
          }
        }

        markup(){
          if (!!this.stepTypes[this.data.type]) {
            let html =  `
              <div class="vertical-step">
                <div class="vertical-step-left">
                  <span class="step-icon">${ this.data.icon ? this.data.icon : this.data.step }</span>
                </div>
                <div class="vertical-step-content">
                  <div class="vertical-step-header">
                    <h2>${ this.data.title }</h2>
                    <p>${ this.data.subtitle }</p>
                  </div>
                  <div class="vertical-step-selections">
                    ${ this.stepTypes[this.data.type].make(this.data) }
                  </div>

                </div>
              </div>
            `;

            let template = document.createElement('template');
            template.innerHTML = html.trim();
            if (this.data.type == 'checkbox') {
              template.content.firstChild.querySelector('.vertical-step-content:last-child')
                              .appendChild(this.stepTypes[this.data.type].checkboxNext(this.data))
            }
            template.content.firstChild.addEventListener('click', this.data.stepLeave);
            return template.content.firstChild;
          }
        }

      }




      let stepsArray = [
        {
          type: 'checkbox',
          step: 1,
          title: 'Example question 1',
          subtitle: 'This is supporting text for the question.',
          selections: [
            {
              text: 'Yes',
              name: 'cb-ex-yes'
            },
            {
              text: 'No',
              name: 'cb-ex-no'
            },
            {
              text: 'Maybe So',
              name: 'cb-ex-maybe'
            },
            {
              text: 'So So',
              name: 'cb-ex-so-so'
            }
          ],
          stepEnter: (formInfo) => {
            console.log(formInfo);
          },
          stepLeave: (evt) => {
            let form = evt.path.filter( item => item.nodeName === 'FORM' );
            console.log(form[0].elements);
          }
        },
        {
          type: 'radio',
          step: 2,
          title: 'Example question 2',
          subtitle: '',
          selections: [
            {
              text: 'Yes Radio',
              id: 'radio-ex-yes',
              name: 'radio-step-example'
            },
            {
              text: 'No Radio',
              id: 'radio-ex-no',
              name: 'radio-step-example'
            },
            {
              text: 'Maybe So Radio',
              id: 'radio-ex-maybe',
              name: 'radio-step-example'
            },
            {
              text: 'So So Radio',
              id: 'radio-ex-so-so',
              name: 'radio-step-example'
            }
          ],
          stepEnter: (formInfo) => {
            console.log(formInfo);
          },
          stepLeave: (evt) => {
            let form = evt.path.filter( item => item.nodeName === 'FORM' );
            console.log(form[0].elements);
          }
        }
      ];

      // stepperInit('.stepper-example', 'example-form', stepsArray);

      window.onload =  function(){
        let think = new Stepper('.stepper-example', 'class-stepper', stepsArray);
        think.render()
        // console.log(think.render());
      }

    </script>
  </body>
</html>
